<!-- templates\products\product_detail.html -->
{% extends "base.html" %}

{% block content %}
<h2>{{ product.name }}</h2>
<p>{{ product.description }}</p>
<p><strong>Category:</strong> {{ product.category }}</p>
<p><strong>Price:</strong> ${{ product.price }}</p>
<p><strong>Stock:</strong> {{ product.stock }}</p>
<p><strong>Created at:</strong> {{ product.created_at }}</p>
<p><strong>Updated at:</strong> {{ product.updated_at }}</p>
<div>
    {% for image in product.images.all %}
    <div>
        <img src="{{ image.image.url }}" alt="{{ product.name }}" style="max-width: 200px;">
    </div>
    {% endfor %}
</div>

<h3>Reviews</h3>
<div>
    {% for review in reviews %}
    <div>
        <p><strong>{{ review.name }}</strong> ({{ review.created_at }})</p>
        <p>Rating: {{ review.rating }}/5</p>
        <p>{{ review.review }}</p>
    </div>
    {% endfor %}
</div>

<h3>Leave a Review</h3>
<form method="post">
    {% csrf_token %}
    {{ review_form.as_p }}
    <button type="submit">Submit Review</button>
</form>

<a href="{% url 'Ecommerce_products:product_edit' product.id %}">Edit</a>
<a href="{% url 'Ecommerce_products:product_delete' product.id %}">Delete</a>
<a href="{% url 'Ecommerce_products:product_list' %}">Back to list</a>

<!-- Add to Cart -->
<h3>Add to Cart</h3>
<a href="{% url 'Ecommerce_cart:add_to_cart' product.id %}">Add to Cart</a>
{% endblock %}